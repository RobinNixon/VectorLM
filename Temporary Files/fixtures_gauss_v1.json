{
  "version": "gl.v1.0.fixtures",
  "notes": "Few-shot fixtures for stabilising LLM behaviour. Values are illustrative; structure and fields are normative.",
  "fixtures": [
    {
      "name": "overlap_exact_basic",
      "op": "\u03c8:overlap",
      "mode": "exact",
      "request": {
        "field_id": "gf.demo",
        "mode": "exact",
        "query": {
          "\u03bc": [
            0.22,
            0.08,
            0.02
          ],
          "\u03c3": 0.05
        },
        "candidates": [
          {
            "id": "plant",
            "\u03bc": [
              0.2,
              0.1,
              0.0
            ],
            "\u03c3": 0.15,
            "w": 1.0
          },
          {
            "id": "animal",
            "\u03bc": [
              0.5,
              -0.1,
              0.1
            ],
            "\u03c3": 0.18,
            "w": 0.8
          }
        ],
        "thresholds": {
          "min_logS": -90,
          "top_k": 2
        }
      },
      "target_response": {
        "weights": [
          {
            "id": "plant",
            "logS": -52.1,
            "w_raw": 0.61
          },
          {
            "id": "animal",
            "logS": -54.0,
            "w_raw": 0.39
          }
        ],
        "weights_norm": [
          {
            "id": "plant",
            "w": 0.61
          },
          {
            "id": "animal",
            "w": 0.39
          }
        ],
        "explain": "Plant overlaps more; lower Mahalanobis term."
      }
    },
    {
      "name": "overlap_proxy_largeD",
      "op": "\u03c8:overlap",
      "mode": "proxy",
      "request": {
        "field_id": "gf.demo",
        "mode": "proxy",
        "query": {
          "\u03bc": "projected",
          "\u03c3": 0.06
        },
        "candidates": [
          {
            "id": "c1",
            "proxy_overlap": {
              "D": 128,
              "sum_d2_over_v": 12.3,
              "sum_log_2pi_v": 88.5,
              "logS": -49.8
            }
          },
          {
            "id": "c2",
            "proxy_overlap": {
              "D": 128,
              "sum_d2_over_v": 13.1,
              "sum_log_2pi_v": 88.5,
              "logS": -51.2
            }
          },
          {
            "id": "c3",
            "proxy_overlap": {
              "D": 128,
              "sum_d2_over_v": 16.0,
              "sum_log_2pi_v": 88.5,
              "logS": -54.9
            }
          }
        ],
        "thresholds": {
          "min_logS": -90,
          "top_k": 2
        }
      },
      "target_response": {
        "weights": [
          {
            "id": "c1",
            "logS": -49.8,
            "w_raw": 0.57
          },
          {
            "id": "c2",
            "logS": -51.2,
            "w_raw": 0.34
          },
          {
            "id": "c3",
            "logS": -54.9,
            "w_raw": 0.09
          }
        ],
        "weights_norm": [
          {
            "id": "c1",
            "w": 0.57
          },
          {
            "id": "c2",
            "w": 0.34
          },
          {
            "id": "c3",
            "w": 0.09
          }
        ],
        "explain": "Ranked by provided logS; proxy mode forbids recomputation."
      }
    },
    {
      "name": "merge_accept",
      "op": "\u03c8:merge",
      "request": {
        "tau_log": -55,
        "bounds": {
          "\u03c3_min": 0.01,
          "\u03c3_max": 1.5
        },
        "items": [
          {
            "id": "fern",
            "\u03bc": [
              0.18,
              0.09,
              0.01
            ],
            "\u03c3": 0.16,
            "w": 0.6
          },
          {
            "id": "ivy",
            "\u03bc": [
              0.2,
              0.1,
              0.0
            ],
            "\u03c3": 0.15,
            "w": 0.5
          }
        ]
      },
      "target_response": {
        "decision": "merge",
        "merged": {
          "id": "fern+ivy",
          "\u03bc": [
            0.19,
            0.095,
            0.005
          ],
          "\u03c3": 0.155,
          "w": 1.1
        },
        "explain": "High overlap; merged to remove redundancy."
      }
    },
    {
      "name": "merge_skip",
      "op": "\u03c8:merge",
      "request": {
        "tau_log": -45,
        "bounds": {
          "\u03c3_min": 0.01,
          "\u03c3_max": 1.5
        },
        "items": [
          {
            "id": "farA",
            "\u03bc": [
              0.9,
              0.9,
              0.9
            ],
            "\u03c3": 0.12,
            "w": 0.4
          },
          {
            "id": "farB",
            "\u03bc": [
              -0.9,
              -0.9,
              -0.9
            ],
            "\u03c3": 0.12,
            "w": 0.4
          }
        ]
      },
      "target_response": {
        "decision": "skip",
        "explain": "Overlap below tau_log; items remain separate."
      }
    },
    {
      "name": "prune_basic",
      "op": "\u03c8:prune",
      "request": {
        "policy": {
          "min_w": 0.03,
          "keep_if_recent": 3
        },
        "items": [
          {
            "id": "noise1",
            "w": 0.01,
            "recent_hits": 0
          },
          {
            "id": "rareX",
            "w": 0.02,
            "recent_hits": 0
          },
          {
            "id": "keepY",
            "w": 0.02,
            "recent_hits": 4
          }
        ]
      },
      "target_response": {
        "drop": [
          "noise1",
          "rareX"
        ],
        "explain": "Below min_w and not recently used; keepY retained due to recency."
      }
    },
    {
      "name": "update_nudge",
      "op": "\u03c8:update",
      "request": {
        "bounds": {
          "\u03c3_min": 0.01,
          "\u03c3_max": 1.5
        },
        "lr": {
          "mu": 0.05,
          "sigma": 0.02,
          "w": 0.01
        },
        "item": {
          "id": "plant",
          "\u03bc": [
            0.2,
            0.1,
            0.0
          ],
          "\u03c3": 0.15,
          "w": 1.0
        },
        "target": {
          "id": "plant*",
          "\u03bc": [
            0.25,
            0.12,
            0.0
          ],
          "\u03c3": 0.14,
          "w": 1.0
        }
      },
      "target_response": {
        "delta": {
          "d\u03bc": [
            0.0025,
            0.001,
            0.0
          ],
          "d\u03c3": [
            -0.002
          ],
          "dw": 0.0
        },
        "clamped": false,
        "explain": "Moved \u03bc toward target; slightly reduced \u03c3."
      }
    },
    {
      "name": "tie_case_lexi",
      "op": "\u03c8:overlap",
      "mode": "exact",
      "request": {
        "field_id": "gf.demo",
        "mode": "exact",
        "query": {
          "\u03bc": [
            0,
            0,
            0
          ],
          "\u03c3": 0.1
        },
        "candidates": [
          {
            "id": "a1",
            "\u03bc": [
              0,
              0,
              0
            ],
            "\u03c3": 0.2,
            "w": 1.0
          },
          {
            "id": "a2",
            "\u03bc": [
              0,
              0,
              0
            ],
            "\u03c3": 0.2,
            "w": 1.0
          }
        ],
        "thresholds": {
          "min_logS": -90,
          "top_k": 2
        }
      },
      "target_response": {
        "weights": [
          {
            "id": "a1",
            "logS": -51.0,
            "w_raw": 0.5
          },
          {
            "id": "a2",
            "logS": -51.0,
            "w_raw": 0.5
          }
        ],
        "weights_norm": [
          {
            "id": "a1",
            "w": 0.5
          },
          {
            "id": "a2",
            "w": 0.5
          }
        ],
        "explain": "Tie; order by lexicographic id."
      }
    },
    {
      "name": "merge_conflict_batch",
      "op": "\u03c8:merge_batch",
      "request": {
        "tau_log": -55,
        "bounds": {
          "\u03c3_min": 0.01,
          "\u03c3_max": 1.5
        },
        "pairs": [
          [
            {
              "id": "p",
              "\u03bc": [
                0.1,
                0.1,
                0.1
              ],
              "\u03c3": 0.12,
              "w": 0.3
            },
            {
              "id": "q",
              "\u03bc": [
                0.11,
                0.09,
                0.1
              ],
              "\u03c3": 0.12,
              "w": 0.25
            }
          ],
          [
            {
              "id": "q",
              "\u03bc": [
                0.11,
                0.09,
                0.1
              ],
              "\u03c3": 0.12,
              "w": 0.25
            },
            {
              "id": "r",
              "\u03bc": [
                0.12,
                0.08,
                0.09
              ],
              "\u03c3": 0.12,
              "w": 0.2
            }
          ]
        ]
      },
      "target_response": {
        "accepted": [
          "p+q"
        ],
        "rejected": [
          "q+r"
        ],
        "explain": "Return conflict-free set; q used once."
      }
    }
  ]
}